---
title: "1. Introduction"
format: html
---

```{r}
library(readr)
library(downloadthis)
library(DT)
library(dplyr)
library(here)
library(httr2)
library(jsonlite)
source(here::here('functions/load_functions.R'))
load_functions()
```

## Basic Information

### Community Hospitals of Central California (CHCC)

When Googling CHCC, the website that comes up first is ["Community Medical Centers"](https://www.communitymedical.org/). They list 4 hospital facilities on their site, but no location for a headquarters. These locations are:

  - Clovis Community Medical Center
      - 2755 Herndon Avenue
      - Clovis, CA 93611
      - `(559) 324-4000`
  
  - Community Regional Medical Center
      - 2823 Fresno Street
      - Fresno, CA 93721
      - `(559) 459-6000`
  
  - Fresno Heart & Surgical Hospital
      - 15 E. Audubon Drive
      - Fresno, CA 93720
      - `(559) 433-8000`
  
  - Community Behavioral Health Center
      - 7171 N. Cedar Avenue
      - Fresno, CA 93720
      - `(559) 449-8000`
      
      
#### Form 990 {#sec-form-990}

Below is basic information pulled from [@giving_tuesday_data_commons_990]. For all variable definitions see @sec-form-990-dd.

```{r}
# GET request for giving Tuesday 990 data
resp_990 <- get_990(ein = "942437106") 
```

##### Condensed Results
```{r}
#| output: true
resp_990$body$results %>% 
  select(id, TAXYEAR, TOTAEMPLCNTN, FILERNAME1, FILERUS1, FILERUSCITY, FILERUSSTATE, 
         FILERUSZIP, FORMATIONORM, GOVERNGRANTS, INFOTECHTOTA, MANAGENEEXPE, 
         ININTORECOOL, INTERETOTALO, LEGAFEESTOTA, NBREVOTIMEMB, OCCUPATOTALO, 
         OFFIEXPETOTA, ORGANIZATION3, OTHEMPBENTOT, OTHSALWAGTOT, PAYRTAXETOTA, 
         PENPLACONTOT, PROGSERVEXPE, TLNAEOY, TNAFBEOY, TOTREVCURYEA) %>% 
  rename_990() %>% 
  arrange(desc(tax_year)) %>% 
  DT::datatable(extensions = 'Buttons',
                options = list(
                  paging = TRUE,
                  searching = TRUE,
                  fixedColumns = TRUE,
                  autoWidth = TRUE,
                  ordering = TRUE,
                  dom = 'ftBlp',
                  buttons = c('copy', 'csv')
                  ),
                class = "display")
```

##### All Results

```{r}
#| output: true
resp_990$body$results %>% 
  select(order(colnames(.))) %>% 
  relocate(id, TAXYEAR) %>% 
  arrange(desc(TAXYEAR)) %>% 
  DT::datatable(extensions = 'Buttons',
                options = list(
                  paging = TRUE,
                  searching = TRUE,
                  fixedColumns = TRUE,
                  autoWidth = TRUE,
                  ordering = TRUE,
                  dom = 'ftBlp',
                  buttons = c('copy', 'csv')
                  ),
                class = "display")
```


## Company History



### Form 990 Data Dictionary {#sec-form-990-dd}

This table gives definitions for all of the variables in @sec-form-990.
```{r}
read_csv(here::here("data/Basic_Data_Dic_Giving_Tuesday_Data_Commons.csv")) %>% 
  arrange(`Variable Name`) %>% 
  DT::datatable(extensions = 'Buttons',
                options = list(
                  paging = TRUE,
                  searching = TRUE,
                  fixedColumns = TRUE,
                  autoWidth = TRUE,
                  ordering = TRUE,
                  dom = 'ftBlp',
                  buttons = c('copy', 'csv')
                  ),
                class = "display")
```